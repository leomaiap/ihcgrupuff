<!DOCTYPE html>
<html class="dark" lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Criar Novo Grupo</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap"
    rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: { primary: "#137fec", "background-dark": "#101922" },
          fontFamily: { display: ["Plus Jakarta Sans", "sans-serif"] }
        }
      }
    }
  </script>

  <style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24
    }

    .material-symbols-outlined.fill {
      font-variation-settings: 'FILL' 1
    }
  </style>
</head>

<body class="bg-background-dark text-white min-h-screen font-display">
  <div class="relative flex min-h-screen flex-col">

    <header class="sticky top-0 z-10 bg-background-dark/90 backdrop-blur border-b border-white/10">
      <div class="flex items-center p-4 justify-between">
        <a href="explorar.html" class="text-white/60 hover:text-white">
          <span class="material-symbols-outlined">close</span>
        </a>
        <h1 class="text-lg font-bold">Criar Novo Grupo</h1>
        <div class="w-10"></div>
      </div>
    </header>

    <main class="flex-1 px-4 py-6 pb-32">
      <form id="createGroupForm" class="space-y-6">


        <div>
          <label class="block text-base font-medium mb-2">Nome do Grupo</label>
          <input required id="groupName" type="text" value="Estudo C√°lculo 1" placeholder="Ex: Programa√ß√£o para Meninas"
            class="w-full px-4 py-4 rounded-lg bg-white/5 border border-white/20 focus:border-primary focus:outline-none" />
        </div>


        <div>
          <label class="block text-base font-medium mb-3">Imagem do Grupo</label>
          <div class="flex items-center gap-4">
            <div id="preview"
              class="w-24 h-24 rounded-full bg-white/5 border-2 border-dashed border-white/30 flex items-center justify-center overflow-hidden">
              <img
                src="https://hotmart.s3.amazonaws.com/product_pictures/2bbcd440-e547-4d2a-9027-0d9e9b17a256/calculoI.jpg"
                class="w-full h-full object-cover rounded-full" id="previewImg">
              <span class="material-symbols-outlined text-4xl text-white/40 hidden" id="previewIcon">image</span>
            </div>
            <label class="cursor-pointer">
              <span class="px-6 py-3 bg-white/10 rounded-lg hover:bg-white/20 transition">Escolher imagem</span>
              <input id="groupImage" type="file" accept="image/*" class="hidden" />
            </label>
          </div>
        </div>


        <div>
          <label class="block text-base font-medium mb-2">Descri√ß√£o</label>
          <textarea required id="groupDesc" rows="4" placeholder="Fale sobre o grupo..."
            class="w-full px-4 py-4 rounded-lg bg-white/5 border border-white/20 focus:border-primary focus:outline-none resize-none">Grupo de estudos para C√°lculo 1 - d√∫vidas, materiais e monitorias</textarea>
        </div>


        <div>
          <label class="block text-base font-medium mb-3">Etiquetas</label>
          <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 text-sm">
            <label class="flex items-center gap-2"><input type="checkbox" value="mulheres"> Mulheres</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="lgbtqia"> LGBTQIA+</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="diversidade"> Diversidade</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="inclusao"> Inclus√£o</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="tecnologia"> Tecnologia</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="academico" checked> Acad√™mico</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="estudo" checked> Estudo</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="robotica"> Rob√≥tica</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="black"> Black</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="cotistas"> Cotistas</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="jogos"> Jogos</label>
            <label class="flex items-center gap-2"><input type="checkbox" value="evento"> Evento</label>
          </div>
        </div>


        <div>
          <label class="block text-base font-medium mb-3">Privacidade</label>
          <label class="flex items-center gap-3 mb-3">
            <input type="radio" name="privacy" value="publico" checked class="w-5 h-5">
            <span>P√∫blico</span>
          </label>
          <label class="flex items-center gap-3">
            <input type="radio" name="privacy" value="privado" class="w-5 h-5">
            <span>Privado</span>
          </label>
        </div>

        <button type="submit"
          class="w-full h-14 rounded-xl bg-primary text-white font-bold text-lg shadow-lg shadow-primary/30 hover:bg-primary/90 transition">
          Criar Grupo
        </button>
      </form>
    </main>


    <nav
      class="fixed bottom-0 left-0 right-0 z-20 border-t border-gray-200 bg-white/80 backdrop-blur-sm dark:border-gray-700 dark:bg-background-dark/80">

      <div class="mx-auto flex h-20 max-w-md items-center justify-around px-4">
        <a class="flex flex-col items-center justify-center text-gray-500 hover:text-primary dark:text-gray-400 dark:hover:text-primary"
          href="grupos2.html">
          <span class="material-symbols-outlined !text-3xl">groups</span>
          <span class="text-xs font-medium">Meus Grupos</span>
        </a>

        <a class="flex flex-col items-center justify-center text-gray-500 hover:text-primary dark:text-gray-400 dark:hover:text-primary"
          href="explorar.html">
          <span class="material-symbols-outlined !text-3xl">language</span>
          <span class="text-xs font-medium">Explorar Grupos</span>
        </a>

        <a class="flex flex-col items-center justify-center text-primary" href="criar.html">
          <span class="material-symbols-outlined filled !text-3xl">add_circle</span>
          <span class="text-xs font-bold">Criar Grupo</span>
        </a>

        <a class="flex flex-col items-center justify-center text-gray-500 hover:text-primary dark:text-gray-400 dark:hover:text-primary"
          href="carona.html">
          <span class="material-symbols-outlined !text-3xl">directions_car</span>
          <span class="text-xs font-medium">Carona</span>
        </a>
      </div>
    </nav>
  </div>


  <script>
    const form = document.getElementById('createGroupForm');
    const imageInput = document.getElementById('groupImage');
    const previewImg = document.getElementById('previewImg');
    const previewIcon = document.getElementById('previewIcon');


    imageInput.addEventListener('change', () => {
      const file = imageInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          previewImg.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    });


    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const name = document.getElementById('groupName').value.trim();
      const desc = document.getElementById('groupDesc').value.trim();
      const tags = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
        .map(cb => cb.value);


      if (!tags.includes('estudo')) tags.push('estudo');
      if (!tags.includes('academico')) tags.push('academico');

      const imageFile = imageInput.files[0];
      const defaultImage = "https://hotmart.s3.amazonaws.com/product_pictures/2bbcd440-e547-4d2a-9027-0d9e9b17a256/calculoI.jpg";

      const saveGroup = (imageUrl) => {
        const groups = JSON.parse(localStorage.getItem('userCreatedGroups') || '[]');

        const newGroup = {
          name: name || "Estudo C√°lculo 1",
          image: imageUrl,
          members: Math.floor(Math.random() * 100) + 20,
          tags: tags.join(' '),
          desc: desc
        };

        groups.push(newGroup);
        localStorage.setItem('userCreatedGroups', JSON.stringify(groups));

        alert('Grupo criado com sucesso! üéâ');
        window.location.href = 'explorar.html';
      };

      if (imageFile) {
        const reader = new FileReader();
        reader.onload = (e) => saveGroup(e.target.result);
        reader.readAsDataURL(imageFile);
      } else {
        saveGroup(defaultImage);
      }
    });
  </script>
</body>

</html>